{% include "header.html" %}

<body class="{{ slug }}">

<header>
   <section class="site-stuff">
      <p><a href="/"><i>The Adventures of&hellip;</i></a></p>
      <select id="level-switcher" onchange="setLevel(this.value)">
        <option value=""{% unless level %} selected{% endunless %}>Full Text</option>
        <option value="22"{% if level == 22 %} selected{% endif %}>Level 22</option>
        <option value="16"{% if level == 16 %} selected{% endif %}>Level 16</option>
      </select>
   </section>
   <div class="story-stuff-wrap">
   <section id="story-stuff" class="large">
      <h1>
         <em>The Adventures of</em> 
         <a href="/{{ slug }}">{{ title }}</a>
      </h1>
      <p class="release-year">{{page.date|date: "%Y" }} &bull; 2024</p>
   
      <a id="chapternav" href="#nav" onclick="toggle_class('nav');">Contents</a>
      <!--<p onclick="story_header('story-stuff');">Storystuff</p>-->
   </section>
   </div>
</header>

<div class="wrap">
<main>
  {{content}}
</main>

<!--<div class="content" id="content">
</div>-->
  
<footer>
</footer>
</div>

<!-- Scripts -->
<script src="/scripts/main.js"></script>

<script type="text/javascript">
// <!--
    function toggle_class(id) {
       var e = document.getElementById(id);
       if(e.className == 'hidden')
          e.className = 'shown';
       else
          e.className = 'hidden';
    }
    function story_header(id) {
       var e = document.getElementById(id);
       if(e.className == 'small')
          e.className = 'large';
       else
          e.className = 'small';
    }
    function setLevel(level) {
      var slug = '{{ slug }}';
      var defined = {{ storyLevels | json }};
      if (level) {
        localStorage.setItem('readingLevel', level);
        if (defined[slug]) {
          window.location.href = '/' + slug + '-' + level + '/';
        }
      } else {
        localStorage.removeItem('readingLevel');
        if (defined[slug]) {
          window.location.href = '/' + slug + '/';
        }
      }
    }
    window.addEventListener('scroll', () => {
    const storyHeader = document.getElementById('story-stuff');
      if (window.scrollY > 480) {
        storyHeader.classList.add('small');
        storyHeader.classList.remove('large');
    } else {
        storyHeader.classList.add('large');
        storyHeader.classList.remove('small');
    }
});
//-->
</script>
</body>
</html>
